context:
  version: 1.109.51242
  sha256: 5081e308cb48766a2c24ebbeac37e368befb93fb9fd53dd4d6768c536f386bc7
  # https://open-vsx.org/api/KylinIdeTeam/cmake-intellisence/versions?size=1
  cmake_version: 0.4.0
  # https://open-vsx.org/api/KylinIdeTeam/cmake-intellisence/latest/file/sha256
  cmake_sha256: d4e40b3d59040ee57065104747e5a4b67144be053cfffaf79d3a3fb8a270e2eb
  # https://open-vsx.org/api/llvm-vs-code-extensions/vscode-clangd/versions?size=1
  clangd_version: 0.4.0
  # https://open-vsx.org/api/llvm-vs-code-extensions/vscode-clangd/latest/file/sha256
  clangd_sha256: afbd4f002b89641012b166051caa2af2f56ed732b7dbf4bc00a56d0891e41aa9
  # https://api.github.com/repos/mathworks/MATLAB-extension-for-vscode/releases/latest
  # matlab_version: 1.3.8
  # matlab_sha256: 58e4c73b48a4eb3c5926b833c0164360977b8eddd38afeeaa3a7bf0eb1ad4d3f
  # https://open-vsx.org/api/ms-python/python/versions?size=1
  python_version: 2026.0.0
  # https://open-vsx.org/api/ms-python/python/latest/file/sha256
  python_sha256: e396d253fc3ef967bd11b1df5e827c2cbb6b30af6e7f56c1a0cfa5f933410465
  # https://api.github.com/repos/whoami730/cython-enhanced/releases/latest
  cython_version: 1.0.5
  cython_sha256: 423715d7efbac30a5db53eb0eb64afe08b9ec7d462613b3622b96ccec3bfa54b
  # https://open-vsx.org/api/charliermarsh/ruff/win32-x64/versions?size=1
  ruff_version: 2026.36.0
  # https://open-vsx.org/api/charliermarsh/ruff/win32-x64/latest/file/sha256
  ruff_sha256: 34ce5789217c92228e0e88e2f41478e53a3e77197e6aac4f03ade164f9965d19
  # https://open-vsx.org/api/tamasfe/even-better-toml/versions?size=1
  toml_version: 0.21.2
  # https://open-vsx.org/api/tamasfe/even-better-toml/latest/file/sha256
  toml_sha256: f3dc44f1c551edef397a79f0f8c5db4066c6a547e210b5c3cec4400bf173b008

package:
  name: vscodium
  version: ${{ version }}

source:
- url: https://github.com/VSCodium/VSCodium/releases/download/${{ version }}/VSCodium-win32-x64-${{ version }}.zip
  sha256: ${{ sha256 }}
  target_directory: vscodium
  patches:
  - 0001-customize.patch
- url: https://open-vsx.org/api/KylinIdeTeam/cmake-intellisence/${{ cmake_version }}/file/KylinIdeTeam.cmake-intellisence-${{ cmake_version }}.vsix
  sha256: ${{ cmake_sha256 }}
  target_directory: vscodium/bootstrap/extensions
- url: https://open-vsx.org/api/llvm-vs-code-extensions/vscode-clangd/${{ clangd_version }}/file/llvm-vs-code-extensions.vscode-clangd-${{ clangd_version }}.vsix
  sha256: ${{ clangd_sha256 }}
  target_directory: vscodium/bootstrap/extensions
# - url: https://github.com/mathworks/MATLAB-extension-for-vscode/releases/download/v${{ matlab_version }}/language-matlab-${{ matlab_version }}.vsix
#   sha256: ${{ matlab_sha256 }}
#   target_directory: vscodium/bootstrap/extensions
- url: https://open-vsx.org/api/ms-python/python/${{ python_version }}/file/ms-python.python-${{ python_version }}.vsix
  sha256: ${{ python_sha256 }}
  target_directory: vscodium/bootstrap/extensions
- url: https://github.com/whoami730/cython-enhanced/releases/download/${{ cython_version }}/cython-enhanced.vsix
  sha256: ${{ cython_sha256 }}
  target_directory: vscodium/bootstrap/extensions
- url: https://open-vsx.org/api/charliermarsh/ruff/win32-x64/${{ ruff_version }}/file/charliermarsh.ruff-${{ ruff_version }}@win32-x64.vsix
  sha256: ${{ ruff_sha256 }}
  target_directory: vscodium/bootstrap/extensions
- url: https://open-vsx.org/api/tamasfe/even-better-toml/${{ toml_version }}/file/tamasfe.even-better-toml-${{ toml_version }}.vsix
  sha256: ${{ toml_sha256 }}
  target_directory: vscodium/bootstrap/extensions

build:
  number: 0
  script:
  - md "%LIBRARY_PREFIX%\opt"
  - cp -al vscodium "%LIBRARY_PREFIX%\opt"
  skip:
  - not win
  - build_platform != target_platform

requirements:
  host:
  - m2-coreutils
  - vc

tests:
- script:
  - '"%CONDA_PREFIX%\Library\opt\vscodium\bin\codium.cmd" --version'

about:
  license: MIT
  license_family: MIT
  summary: binary releases of VS Code without MS branding/telemetry/licensing
